<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating a Pod | 张不坏的博客</title>
    <meta name="description" content="Just For Fun">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.37bfab3d.css" as="style"><link rel="preload" href="/assets/js/app.50bca889.js" as="script"><link rel="preload" href="/assets/js/5.081d1701.js" as="script"><link rel="preload" href="/assets/js/59.773775e1.js" as="script"><link rel="prefetch" href="/assets/js/10.7bb33f06.js"><link rel="prefetch" href="/assets/js/100.014ff06c.js"><link rel="prefetch" href="/assets/js/101.28f11de0.js"><link rel="prefetch" href="/assets/js/102.be9d2e87.js"><link rel="prefetch" href="/assets/js/103.a1210d81.js"><link rel="prefetch" href="/assets/js/104.7101a956.js"><link rel="prefetch" href="/assets/js/105.833e6f80.js"><link rel="prefetch" href="/assets/js/106.978e1fc0.js"><link rel="prefetch" href="/assets/js/107.5af47fd0.js"><link rel="prefetch" href="/assets/js/108.efc3ce89.js"><link rel="prefetch" href="/assets/js/109.a69d6b5a.js"><link rel="prefetch" href="/assets/js/11.2de4afc9.js"><link rel="prefetch" href="/assets/js/110.30984b63.js"><link rel="prefetch" href="/assets/js/12.bfc099bd.js"><link rel="prefetch" href="/assets/js/13.20253e0d.js"><link rel="prefetch" href="/assets/js/14.67131b1c.js"><link rel="prefetch" href="/assets/js/15.1af26cbd.js"><link rel="prefetch" href="/assets/js/16.4b261ee0.js"><link rel="prefetch" href="/assets/js/17.1216332f.js"><link rel="prefetch" href="/assets/js/18.c0159773.js"><link rel="prefetch" href="/assets/js/19.0f007f87.js"><link rel="prefetch" href="/assets/js/2.b4633a05.js"><link rel="prefetch" href="/assets/js/20.4b295001.js"><link rel="prefetch" href="/assets/js/21.0c46767c.js"><link rel="prefetch" href="/assets/js/22.a5e065ea.js"><link rel="prefetch" href="/assets/js/23.f43a6a7e.js"><link rel="prefetch" href="/assets/js/24.245f4f15.js"><link rel="prefetch" href="/assets/js/25.618f74a1.js"><link rel="prefetch" href="/assets/js/26.274a606b.js"><link rel="prefetch" href="/assets/js/27.c2d8fe18.js"><link rel="prefetch" href="/assets/js/28.5c522d2a.js"><link rel="prefetch" href="/assets/js/29.c90fdb1a.js"><link rel="prefetch" href="/assets/js/3.9babd8f1.js"><link rel="prefetch" href="/assets/js/30.1ccbdebc.js"><link rel="prefetch" href="/assets/js/31.acf3eca6.js"><link rel="prefetch" href="/assets/js/32.ccfdc859.js"><link rel="prefetch" href="/assets/js/33.9b262756.js"><link rel="prefetch" href="/assets/js/34.c59a4044.js"><link rel="prefetch" href="/assets/js/35.2b10fefb.js"><link rel="prefetch" href="/assets/js/36.2daeeb7b.js"><link rel="prefetch" href="/assets/js/37.d649866c.js"><link rel="prefetch" href="/assets/js/38.aba1ac95.js"><link rel="prefetch" href="/assets/js/39.58a95fd1.js"><link rel="prefetch" href="/assets/js/4.a7413ce2.js"><link rel="prefetch" href="/assets/js/40.8ef4d374.js"><link rel="prefetch" href="/assets/js/41.5799de7a.js"><link rel="prefetch" href="/assets/js/42.b7ee7489.js"><link rel="prefetch" href="/assets/js/43.28a65d64.js"><link rel="prefetch" href="/assets/js/44.90f92ea2.js"><link rel="prefetch" href="/assets/js/45.30b683fd.js"><link rel="prefetch" href="/assets/js/46.f57ccc19.js"><link rel="prefetch" href="/assets/js/47.7a82bd74.js"><link rel="prefetch" href="/assets/js/48.72503020.js"><link rel="prefetch" href="/assets/js/49.3a4ba077.js"><link rel="prefetch" href="/assets/js/50.0c3297f3.js"><link rel="prefetch" href="/assets/js/51.e9ba9363.js"><link rel="prefetch" href="/assets/js/52.473ee9ff.js"><link rel="prefetch" href="/assets/js/53.166d6e7a.js"><link rel="prefetch" href="/assets/js/54.78af3662.js"><link rel="prefetch" href="/assets/js/55.f0d54751.js"><link rel="prefetch" href="/assets/js/56.5de81531.js"><link rel="prefetch" href="/assets/js/57.6e18322f.js"><link rel="prefetch" href="/assets/js/58.1fccc879.js"><link rel="prefetch" href="/assets/js/6.0c9cc532.js"><link rel="prefetch" href="/assets/js/60.0d665185.js"><link rel="prefetch" href="/assets/js/61.d9ae36dc.js"><link rel="prefetch" href="/assets/js/62.fb5e3b65.js"><link rel="prefetch" href="/assets/js/63.5ace8fda.js"><link rel="prefetch" href="/assets/js/64.d44fb0af.js"><link rel="prefetch" href="/assets/js/65.ed8fe56f.js"><link rel="prefetch" href="/assets/js/66.809078da.js"><link rel="prefetch" href="/assets/js/67.2489499e.js"><link rel="prefetch" href="/assets/js/68.e3ee952d.js"><link rel="prefetch" href="/assets/js/69.071411f8.js"><link rel="prefetch" href="/assets/js/7.8188415c.js"><link rel="prefetch" href="/assets/js/70.be8269cf.js"><link rel="prefetch" href="/assets/js/71.a320347a.js"><link rel="prefetch" href="/assets/js/72.f4fda48b.js"><link rel="prefetch" href="/assets/js/73.0f9f9284.js"><link rel="prefetch" href="/assets/js/74.b4028d07.js"><link rel="prefetch" href="/assets/js/75.6d63415f.js"><link rel="prefetch" href="/assets/js/76.d5b4df24.js"><link rel="prefetch" href="/assets/js/77.62b794e1.js"><link rel="prefetch" href="/assets/js/78.63e767ab.js"><link rel="prefetch" href="/assets/js/79.45056905.js"><link rel="prefetch" href="/assets/js/8.20d7cb0f.js"><link rel="prefetch" href="/assets/js/80.e06c5521.js"><link rel="prefetch" href="/assets/js/81.bc82bd01.js"><link rel="prefetch" href="/assets/js/82.4aeb6081.js"><link rel="prefetch" href="/assets/js/83.3ed6146f.js"><link rel="prefetch" href="/assets/js/84.f2aff9f4.js"><link rel="prefetch" href="/assets/js/85.2b8f4e50.js"><link rel="prefetch" href="/assets/js/86.27aea1da.js"><link rel="prefetch" href="/assets/js/87.7f5dc71e.js"><link rel="prefetch" href="/assets/js/88.9ca6511c.js"><link rel="prefetch" href="/assets/js/89.e8f54ad1.js"><link rel="prefetch" href="/assets/js/9.ee6c43f7.js"><link rel="prefetch" href="/assets/js/90.9abac718.js"><link rel="prefetch" href="/assets/js/91.9d8f5f36.js"><link rel="prefetch" href="/assets/js/92.2277b907.js"><link rel="prefetch" href="/assets/js/93.efca2f57.js"><link rel="prefetch" href="/assets/js/94.e9cc0386.js"><link rel="prefetch" href="/assets/js/95.fa3326f7.js"><link rel="prefetch" href="/assets/js/96.82bafc57.js"><link rel="prefetch" href="/assets/js/97.da22d13e.js"><link rel="prefetch" href="/assets/js/98.d745e5ec.js"><link rel="prefetch" href="/assets/js/99.79a6f693.js">
    <link rel="stylesheet" href="/assets/css/0.styles.37bfab3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="navbar"><div class="navbar-content"><div class="slogan">Valar Morghulis</div> <div class="links"><span class="link-item"><a href="/">首页</a></span> <span class="link-item"><a href="/category/iOS/">iOS</a></span> <span class="link-item"><a href="/category/other/">其他</a></span></div></div></div> <div class="content-header"><div class="post-title">Creating a Pod</div> <div class="post-info">2016-10-10</div></div> <div class="content content__default"><p>曾尝试自己制作一个 pod，本文旨在记录其过程，以及了解到的一些相关概念。</p> <h2 id="制作一个-pod-的基本套路"><a href="#制作一个-pod-的基本套路" class="header-anchor">#</a> 制作一个 pod 的基本套路</h2> <p>这部分旨在介绍 pod（非本地，存于 GitHub 上）的基本制作套路。</p> <p>1、在 GitHub 上创建一个空仓库，<code>git clone</code>到本地，然后在该仓库的基础上创建一个 framework（关于 iOS framework，详见 iOS Framework）。
2、在 framework 根目录下创建一个 Podspec 文件，并进行配置。</p> <p>什么是 Podspec 文件呢？<a href="https://guides.cocoapods.org/making/specs-and-specs-repo.html" target="_blank" rel="noopener noreferrer">CocoaPods<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的描述是：</p> <blockquote><p>A Podspec, or Spec, describes a version of a Pod library. One Pod, over the course of time, will have many Specs. It includes details about where the source should be fetched from, what files to use, the build settings to apply, and other general metadata such as its name, version, and description.</p></blockquote> <p>PodSpec 文件一般以<code>.podspec</code>为后缀，可以手动创建，也可以运行<code>pod spec create</code>创建，譬如<code>pod spec create SJUtils</code>会创建一个名为<code>SJUtils.podspec</code>的文件。</p> <p>Podspec 是 ruby 文件，基本都是自解释的属性，哪怕不懂 ruby，也能很容易读懂。</p> <p>3、确保 pod 所对应仓库被 push 到 GitHub 上了。</p> <p>4、确保所 push 的代码已经打上 tag，也就是给源代码打上版本号标签：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">git</span> tag <span class="token string">'0.0.1'</span>
<span class="token function">git</span> push --tags
</code></pre></div><p>5、执行<code>pod lib lint</code>对 Podspec 进行校验，以确定该 pod 是否满足 CocoaPods 的要求。</p> <p>P.S: <code>pod lib lint</code>的有个副作用，即根目录下会多一个软连接文件 – <code>SJUtils.h</code>，不知为什么。</p> <p>6、使用 trunk 上传 PodSpec。</p> <p>在此之前，需要注册 trunk，譬如：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pod trunk register sadjason@qq.com <span class="token string">&quot;sadjason&quot;</span>
</code></pre></div><p>注册成功后会收到一封确认邮件。确认后，执行<code>pod trunk me</code>可以查看注册信息。</p> <p>然后使用<code>pod trunk</code>命令，将 Podspec push 到 CocoaPods 的 spec 中：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pod trunk push SJUtils.podspec
</code></pre></div><p>上传完 Podspec 后，似乎没有审核通过的通知，那么如何知道是否通过审核呢？通过<code>pod search</code>命令搜索吧！</p> <h2 id="创建本地-pod"><a href="#创建本地-pod" class="header-anchor">#</a> 创建本地 Pod</h2> <p>如果只是想创建一个本地 pod，则更容易处理一些。首先修改 pod 的 Podspec 文件的<code>s.source</code>字段，指向到本地目录</p> <div class="language-sh extra-class"><pre class="language-sh"><code>s.source <span class="token operator">=</span> <span class="token punctuation">{</span> :path <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'.'</span> <span class="token punctuation">}</span>
</code></pre></div><p>然后在使用这个 framework 的工程的 Podfile 里指定 pod path 就可以了，譬如：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pod <span class="token string">'SJUtils'</span>, :path <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'../SJUtils'</span>  <span class="token comment"># path描述了pod install的source地址</span>
</code></pre></div><h2 id="pod-spec-lint-v-s-pod-lib-spec"><a href="#pod-spec-lint-v-s-pod-lib-spec" class="header-anchor">#</a> pod spec lint v.s pod lib spec</h2> <p><a href="https://guides.cocoapods.org/terminal/commands.html#pod_spec_lint" target="_blank" rel="noopener noreferrer">pod spec lint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和<a href="https://guides.cocoapods.org/terminal/commands.html#pod_lib_lint" target="_blank" rel="noopener noreferrer">pod lib lint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>都可以用来对 Podspec 进行校验，但二者有所不同，但具体不同之处，官方文档没有较详细的说明（或许是我没找到）。StackOverflow 的 what's the different between 'pod spec lint' and 'pod lib lint'有解释。</p> <p>就我个人实际体会（加上<code>–verbose</code>选项查看更详细步骤），二者步骤差不多，只是前者要求 Podspec 里的<code>s.source</code>必须指向到远程，而后者无此要求。</p> <h2 id="podspec"><a href="#podspec" class="header-anchor">#</a> Podspec</h2> <p>关于 Podspec 各个字段更深层次的意义和赋值，参考<a href="https://guides.cocoapods.org/syntax/podspec.html" target="_blank" rel="noopener noreferrer">podspec.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>选择一些属性稍作说明。</p> <p><strong><code>source</code></strong></p> <p>The location from where the library should be retrieved. 常见两种赋值：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>s.source <span class="token operator">=</span> <span class="token punctuation">{</span> :path <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'.'</span> <span class="token punctuation">}</span>  <span class="token comment"># 本地</span>
s.source <span class="token operator">=</span> <span class="token punctuation">{</span> :git <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'https://github.com/sadjason/SJUtils.git'</span>, :tag <span class="token operator">=</span><span class="token operator">&gt;</span> s.version <span class="token punctuation">}</span>  <span class="token comment"># tag是必须的，s.version描述了version版本，也可以是'0.0.2'之类的字符串</span>
</code></pre></div><h2 id="pod-trunk"><a href="#pod-trunk" class="header-anchor">#</a> pod trunk</h2> <p>更多关于<code>pod trunk</code>的信息，查看<a href="https://guides.cocoapods.org/making/getting-setup-with-trunk.html" target="_blank" rel="noopener noreferrer">Getting setup with Trunk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>P.S: <code>pod trunk</code>貌似有一个 update master spec repo 的过程，蛮漫长的，如何让它快点？</p> <p>P.S: <code>pod trunk</code>命令并不是一开始就有的，在此之前，上传 Podspec 比较麻烦，详见<a href="http://blog.csdn.net/wzzvictory/article/details/20067595" target="_blank" rel="noopener noreferrer">CocoaPods 详解之----制作篇<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p><strong>更多资料</strong></p> <ul><li><a href="http://guides.cocoapods.org/making/" target="_blank" rel="noopener noreferrer">Making CocoaPods<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>https://mp.weixin.qq.com/s/hBgvPBP12IQ1s65ru-paWw</p></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.50bca889.js" defer></script><script src="/assets/js/5.081d1701.js" defer></script><script src="/assets/js/59.773775e1.js" defer></script>
  </body>
</html>
