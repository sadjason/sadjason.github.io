<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>UIWebView 加载本地 HTML 文件 | 张不坏的博客</title>
    <meta name="description" content="Just For Fun">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.37bfab3d.css" as="style"><link rel="preload" href="/assets/js/app.50bca889.js" as="script"><link rel="preload" href="/assets/js/5.081d1701.js" as="script"><link rel="preload" href="/assets/js/106.978e1fc0.js" as="script"><link rel="preload" href="/assets/js/4.a7413ce2.js" as="script"><link rel="prefetch" href="/assets/js/10.7bb33f06.js"><link rel="prefetch" href="/assets/js/100.014ff06c.js"><link rel="prefetch" href="/assets/js/101.28f11de0.js"><link rel="prefetch" href="/assets/js/102.be9d2e87.js"><link rel="prefetch" href="/assets/js/103.a1210d81.js"><link rel="prefetch" href="/assets/js/104.7101a956.js"><link rel="prefetch" href="/assets/js/105.833e6f80.js"><link rel="prefetch" href="/assets/js/107.5af47fd0.js"><link rel="prefetch" href="/assets/js/108.efc3ce89.js"><link rel="prefetch" href="/assets/js/109.a69d6b5a.js"><link rel="prefetch" href="/assets/js/11.2de4afc9.js"><link rel="prefetch" href="/assets/js/110.30984b63.js"><link rel="prefetch" href="/assets/js/12.bfc099bd.js"><link rel="prefetch" href="/assets/js/13.20253e0d.js"><link rel="prefetch" href="/assets/js/14.67131b1c.js"><link rel="prefetch" href="/assets/js/15.1af26cbd.js"><link rel="prefetch" href="/assets/js/16.4b261ee0.js"><link rel="prefetch" href="/assets/js/17.1216332f.js"><link rel="prefetch" href="/assets/js/18.c0159773.js"><link rel="prefetch" href="/assets/js/19.0f007f87.js"><link rel="prefetch" href="/assets/js/2.b4633a05.js"><link rel="prefetch" href="/assets/js/20.4b295001.js"><link rel="prefetch" href="/assets/js/21.0c46767c.js"><link rel="prefetch" href="/assets/js/22.a5e065ea.js"><link rel="prefetch" href="/assets/js/23.f43a6a7e.js"><link rel="prefetch" href="/assets/js/24.245f4f15.js"><link rel="prefetch" href="/assets/js/25.618f74a1.js"><link rel="prefetch" href="/assets/js/26.274a606b.js"><link rel="prefetch" href="/assets/js/27.c2d8fe18.js"><link rel="prefetch" href="/assets/js/28.5c522d2a.js"><link rel="prefetch" href="/assets/js/29.c90fdb1a.js"><link rel="prefetch" href="/assets/js/3.9babd8f1.js"><link rel="prefetch" href="/assets/js/30.1ccbdebc.js"><link rel="prefetch" href="/assets/js/31.acf3eca6.js"><link rel="prefetch" href="/assets/js/32.ccfdc859.js"><link rel="prefetch" href="/assets/js/33.9b262756.js"><link rel="prefetch" href="/assets/js/34.c59a4044.js"><link rel="prefetch" href="/assets/js/35.2b10fefb.js"><link rel="prefetch" href="/assets/js/36.2daeeb7b.js"><link rel="prefetch" href="/assets/js/37.d649866c.js"><link rel="prefetch" href="/assets/js/38.aba1ac95.js"><link rel="prefetch" href="/assets/js/39.58a95fd1.js"><link rel="prefetch" href="/assets/js/40.8ef4d374.js"><link rel="prefetch" href="/assets/js/41.5799de7a.js"><link rel="prefetch" href="/assets/js/42.b7ee7489.js"><link rel="prefetch" href="/assets/js/43.28a65d64.js"><link rel="prefetch" href="/assets/js/44.90f92ea2.js"><link rel="prefetch" href="/assets/js/45.30b683fd.js"><link rel="prefetch" href="/assets/js/46.f57ccc19.js"><link rel="prefetch" href="/assets/js/47.7a82bd74.js"><link rel="prefetch" href="/assets/js/48.72503020.js"><link rel="prefetch" href="/assets/js/49.3a4ba077.js"><link rel="prefetch" href="/assets/js/50.0c3297f3.js"><link rel="prefetch" href="/assets/js/51.e9ba9363.js"><link rel="prefetch" href="/assets/js/52.473ee9ff.js"><link rel="prefetch" href="/assets/js/53.166d6e7a.js"><link rel="prefetch" href="/assets/js/54.78af3662.js"><link rel="prefetch" href="/assets/js/55.f0d54751.js"><link rel="prefetch" href="/assets/js/56.5de81531.js"><link rel="prefetch" href="/assets/js/57.6e18322f.js"><link rel="prefetch" href="/assets/js/58.1fccc879.js"><link rel="prefetch" href="/assets/js/59.773775e1.js"><link rel="prefetch" href="/assets/js/6.0c9cc532.js"><link rel="prefetch" href="/assets/js/60.0d665185.js"><link rel="prefetch" href="/assets/js/61.d9ae36dc.js"><link rel="prefetch" href="/assets/js/62.fb5e3b65.js"><link rel="prefetch" href="/assets/js/63.5ace8fda.js"><link rel="prefetch" href="/assets/js/64.d44fb0af.js"><link rel="prefetch" href="/assets/js/65.ed8fe56f.js"><link rel="prefetch" href="/assets/js/66.809078da.js"><link rel="prefetch" href="/assets/js/67.2489499e.js"><link rel="prefetch" href="/assets/js/68.e3ee952d.js"><link rel="prefetch" href="/assets/js/69.071411f8.js"><link rel="prefetch" href="/assets/js/7.8188415c.js"><link rel="prefetch" href="/assets/js/70.be8269cf.js"><link rel="prefetch" href="/assets/js/71.a320347a.js"><link rel="prefetch" href="/assets/js/72.f4fda48b.js"><link rel="prefetch" href="/assets/js/73.0f9f9284.js"><link rel="prefetch" href="/assets/js/74.b4028d07.js"><link rel="prefetch" href="/assets/js/75.6d63415f.js"><link rel="prefetch" href="/assets/js/76.d5b4df24.js"><link rel="prefetch" href="/assets/js/77.62b794e1.js"><link rel="prefetch" href="/assets/js/78.63e767ab.js"><link rel="prefetch" href="/assets/js/79.45056905.js"><link rel="prefetch" href="/assets/js/8.20d7cb0f.js"><link rel="prefetch" href="/assets/js/80.e06c5521.js"><link rel="prefetch" href="/assets/js/81.bc82bd01.js"><link rel="prefetch" href="/assets/js/82.4aeb6081.js"><link rel="prefetch" href="/assets/js/83.3ed6146f.js"><link rel="prefetch" href="/assets/js/84.f2aff9f4.js"><link rel="prefetch" href="/assets/js/85.2b8f4e50.js"><link rel="prefetch" href="/assets/js/86.27aea1da.js"><link rel="prefetch" href="/assets/js/87.7f5dc71e.js"><link rel="prefetch" href="/assets/js/88.9ca6511c.js"><link rel="prefetch" href="/assets/js/89.e8f54ad1.js"><link rel="prefetch" href="/assets/js/9.ee6c43f7.js"><link rel="prefetch" href="/assets/js/90.9abac718.js"><link rel="prefetch" href="/assets/js/91.9d8f5f36.js"><link rel="prefetch" href="/assets/js/92.2277b907.js"><link rel="prefetch" href="/assets/js/93.efca2f57.js"><link rel="prefetch" href="/assets/js/94.e9cc0386.js"><link rel="prefetch" href="/assets/js/95.fa3326f7.js"><link rel="prefetch" href="/assets/js/96.82bafc57.js"><link rel="prefetch" href="/assets/js/97.da22d13e.js"><link rel="prefetch" href="/assets/js/98.d745e5ec.js"><link rel="prefetch" href="/assets/js/99.79a6f693.js">
    <link rel="stylesheet" href="/assets/css/0.styles.37bfab3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="navbar"><div class="navbar-content"><div class="slogan">Valar Morghulis</div> <div class="links"><span class="link-item"><a href="/">首页</a></span> <span class="link-item"><a href="/category/iOS/">iOS</a></span> <span class="link-item"><a href="/category/other/">其他</a></span></div></div></div> <div class="content-header"><div class="post-title">UIWebView 加载本地 HTML 文件</div> <div class="post-info">2015-06-16 • iOS</div></div> <div class="content content__default"><p>写本文的原因是今天被要求「调研在 iOS 中加载本地 HTML 的相关技术」，好记性不如烂笔头，将一些东西给记录下来吧。</p> <p>应用场景是这样的：手头的 iOS App 有一部分 UI 需要使用 HTML 完成，好处是这部分 UI 可以更灵活，即可以在任何不需要升级 App 的情况下更新这部分 UI（包括样式、操作等等）。当下非常火的技术 -- Facebook 的 React Native -- 正是用来解决这种问题的，毕竟在传统的开发模式下，更新 UI 必须要升级 App，而升级 App 是一个非常耗时的过程。使用 Web App 部分代替 Native App 已经成为当下移动客户端开发的一种思潮了。为了简便起见，也为了不给项目的接盘者制造更高的门槛，暂时决定不使用 React Native（原因是多方面的）等著名框架去这种事情，从 0 开始探究。话说胡来，也许走了这么一遭之后，以后学习 React Native 会有更多的体会呢！</p> <p>总之，目前的构想是这样的：</p> <ol><li>App 部分 UI 是由 HTML+JS+CSS 完成的，HTML+JS+CSS 代码会随着 App 一起发布；</li> <li>当后端决定更新 App 的部分 UI（HTML）时，客户端从服务器下载最新的 HTML+JS+CSS 包，解压后代替本地的、旧的 HTML+JS+CSS 资源，将最新的呈现给用户，至此完成 UI 的更新；</li></ol> <p>因此有这么些问题需要考虑：</p> <ol><li>加载本地 HTML+JS+CSS 资源（在 iOS 中，通常使用 UIWebView）；</li> <li>解压从服务端下载的压缩文件（HTML+JS+   CSS 包）；</li> <li>JS 代码和 OC 代码的互相调用；</li></ol> <p>本文主要探究第一个问题！</p> <h2 id="uiwebview-介绍"><a href="#uiwebview-介绍" class="header-anchor">#</a> UIWebView 介绍</h2> <p>UIWebView 是 iOS 中一个非常常用的控件，是内置的浏览器控件，可能也是最强大复杂的控件。可以用它来浏览网页、打开文档（譬如 PDF 文档）等等。</p> <p>UIWebView 既可以用来显示本地文档，也可以用来显示网络文档。无论是显示本地文件还是网络文件，此过程都可以统称为「加载」。与「加载」相关的方法不多，只有三个：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">// Loading Local Content or Loading Content From the Network</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loadRequest<span class="token punctuation">:</span><span class="token punctuation">(</span>NSURLRequest <span class="token operator">*</span><span class="token punctuation">)</span>request<span class="token punctuation">;</span>
    
<span class="token comment">// 嵌入HTML结构的字符串</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loadHTMLString<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>string
               baseURL<span class="token punctuation">:</span><span class="token punctuation">(</span>NSURL <span class="token operator">*</span><span class="token punctuation">)</span>baseURL<span class="token punctuation">;</span>
    
<span class="token comment">// Loading Local Content</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>loadData<span class="token punctuation">:</span><span class="token punctuation">(</span>NSData <span class="token operator">*</span><span class="token punctuation">)</span>data
        MIMEType<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>MIMEType
textEncodingName<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>textEncodingName
         baseURL<span class="token punctuation">:</span><span class="token punctuation">(</span>NSURL <span class="token operator">*</span><span class="token punctuation">)</span>baseURL<span class="token punctuation">;</span>
</code></pre></div><p>与 UIWebView 相关的知识点并不多（从某种角度来看，也可以认为是 Apple 封装得比较好吧），除了上述的三个方法之外，还有必要了解的是 UIWebViewDelegate 定义的一些 delegate 方法：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">// 开始加载前调用</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>webView<span class="token punctuation">:</span><span class="token punctuation">(</span>UIWebView <span class="token operator">*</span><span class="token punctuation">)</span>webView shouldStartLoadWithRequest<span class="token punctuation">:</span><span class="token punctuation">(</span>NSURLRequest <span class="token operator">*</span><span class="token punctuation">)</span>request
 navigationType<span class="token punctuation">:</span><span class="token punctuation">(</span>UIWebViewNavigationType<span class="token punctuation">)</span>navigationType<span class="token punctuation">;</span>
<span class="token comment">// 开始加载时调用</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>webViewDidStartLoad<span class="token punctuation">:</span><span class="token punctuation">(</span>UIWebView <span class="token operator">*</span><span class="token punctuation">)</span>webView<span class="token punctuation">;</span>
<span class="token comment">// 加载成功时调用</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>webViewDidFinishLoad<span class="token punctuation">:</span><span class="token punctuation">(</span>UIWebView <span class="token operator">*</span><span class="token punctuation">)</span>webView<span class="token punctuation">;</span>
<span class="token comment">// 加载失败时调用</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>webView<span class="token punctuation">:</span><span class="token punctuation">(</span>UIWebView <span class="token operator">*</span><span class="token punctuation">)</span>webView didFailLoadWithError<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span>error<span class="token punctuation">;</span>
</code></pre></div><p>除此之外，UIWebView 似乎有啥其他需要了解的内容，若有需要，以后再补充吧！</p> <h2 id="加载本地-html-文件"><a href="#加载本地-html-文件" class="header-anchor">#</a> 加载本地 HTML 文件</h2> <p>加载本地 HTML 文件不是多么难的事情，但再简单的事情也有一个 1-2-3-4，不是嘛？何况笔者比较笨，参考<a href="http://blog.csdn.net/kaitiren/article/details/17115085" target="_blank" rel="noopener noreferrer">UIWebView 加载本地 HTML5 文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，也分几个步骤：</p> <ol><li>准备 HTML 文件及其资源文件（主要是 CSS 文件和 JS 文件以及 image 文件）；</li> <li>加载本地 HTML 文件；</li></ol> <p>第一种：
loadRequest:
第二种：
loadHTMLString:baseURL:</p> <p><strong>第一步，准备 HTML 文件及其资源文件。</strong></p> <p>HTML 及其资源文件比较容易获取，随便找个比较漂亮的 web 页面，将它保存起来即可！</p> <p>显然 HTML 文件及其资源文件是需要添加到工程的，问题是如何添加呢？如何组织管理这些文件呢？沙盒？Bundle？</p> <p><strong>Xcode 工程添加文件有两种方式</strong></p> <p>向项目中添加已有的文件（或资源文件，或第三方库）不是什么稀罕的事情，只是平时都没怎么注意。实际上，将「文件」或者「目录」添加到项目时，Xcode 给了我们两个选项：Create groups 以及 Create folder references，如下图：</p> <div class="custom-image-wrapper" data-v-339c7bd5><img src="/image/20150616-01.png" srcset="/image/20150616-01.png 2x" data-v-339c7bd5></div> <p>简单来说，若选择 Create groups 的方式添加文件夹，则文件夹的颜色是黄色的；若选择 Create folder references 的，则发现添加的文件夹在工程目录中的的颜色是蓝色的：</p> <div class="custom-image-wrapper" data-v-339c7bd5><img src="/image/20150616-02.png" srcset="/image/20150616-02.png 2x" data-v-339c7bd5></div> <p>当然不只是颜色上的区别！主要是 Xcode 对加入的文件的路径处理不一样。</p> <p>如果文件/文件夹以 Create groups 的方式添加到工程中，则不管加入项目的文件的目录结构如何，在 APP 中都可以通过 mainBundlePath/filename 这样结构来访问文件；反之，若文件/文件夹以 Create folder references 的方式添加到工程中，则会保留相对路径，访问文件的结构就变成了 mainBundlePath/path/filename。</p> <p>理解 Create groups 以及 Create folder references 并不难，自己动手试试就能感受二者的不同了。</p> <p><strong>Bundle 介绍</strong></p> <p>上文谈到了向工程添加文件的两种方式，由此延伸，不得不提 bundle，一直以来对 bundle 的理解非常模糊，知道它的本质是一个目录，也知道在 OS X 中就有此概念，但一直没 get 到<code>bundle</code>的存在意义，总感觉它没必要存在，事实上也没主动使用它。</p> <p>借撰写本文这个机会，驱动一下自己，查查资料，争取对 bundle 理解更深入一点点吧！</p> <p>参考《<a href="http://avatar-matrix.lofter.com/post/e4689_236e82" target="_blank" rel="noopener noreferrer">Bundle in iOS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》和《<a href="http://www.cnblogs.com/BigPolarBear/archive/2012/03/28/2421802.html" target="_blank" rel="noopener noreferrer">iOS 开发里的 Bundle 是个啥玩意<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》。</p> <p>简单地讲，bundle 就是一个内部结构按照标准规则组织的特殊目录，常用来存放一些资源文件，譬如图片，plist 文件等，它不会成为编译的一部分，所以它不存放能够被编译的文件，譬如<code>.m</code>、<code>.h</code>文件等。</p> <p>Bundle 的主要用途是软件的国际化，想象一个应用场景：软件有美国、中国版本，软件的 logo 等图片不同，这时候，我们把相应的图片资源放到一个文件夹下，然后修改文件夹的名字，以<code>.bundle</code>作为后缀，然后添加到 xcode 中。</p> <p>有过 iOS 开发经历的人都应该知道，每个 project 都有个 mainBundle，那如何去获取自己定义的 bundle 内容呢？我们把自定义的 bundle 当成项目的一种资源，由 mainBundle 去获取<code>~</code>，然后我们用相同的方式获取自定义的 bundle 下的资源。即：</p> <p>1、通过 mainBundle 去加载自定义的 bundle；
2、通过获取到的自定义 bundle 去获取资源；</p> <p>根据上述场景来写的 demo 项目结构如下：</p> <div class="custom-image-wrapper" data-v-339c7bd5><img src="/image/20150616-03.png" srcset="/image/20150616-03.png 2x" data-v-339c7bd5></div> <p>此时，我容易联想到了在 Windows 世界经常使用的「汉化包」。根据我的理解，我们通过某种手段得到的「汉化包」和本文所谈及的 bundle 是类似的概念，它们的本质是一个目录，只是这个目录有些特别，特别之处在于它只存放一些资源文件，以及目录名后缀为<code>.bundle</code>，这让它看起来像个文件，但实际上又不是文件，开发者又特别想让普通用户以为它是一个文件...</p> <p>总之，bundle 就是这么个东东。</p> <p>到了这里，应该弄清楚了该把 HTML 文件及其资源放在哪里了。</p> <p>沙盒？显然不可能，沙盒可是 App 到设备之后才有的概念；所以我们只能让 HTML 资源成为工程的一部分呢，编译打包时作为安装包的一部分。</p> <p>放在普通目录下还是组织成 bundle，个人以为没必要组织成 bundle，因为后者主要用来处理国际化问题，国际化问题面对的一般是图片资源、字符串资源等等，所以不需要组成成 bundle，而是直接添加到工程的 mainBundle 中。</p> <p>上文已经提到了 Xcode 工程添加文件有两种方式：Create groups 和 Create folder references，个人以为应该选择后者！</p> <p>值得注意是，当被加入到项目中的文件包含 js 文件时，有可能因为操作不慎等原因，js 文件成为了编译文件，若是这样，应该将它从<code>Compile Sources</code>给踢掉，让它成为<code>Copy Bundle Resources</code>的一部分，具体做法是在 TARGETS-&gt;Build Phases 中的<code>Compile Sources</code>中找到该 js 文件，并将其移到<code>Copy Bundle Resources</code>中，如下图所示：</p> <div class="custom-image-wrapper" data-v-339c7bd5><img src="/image/20150616-05.png" srcset="/image/20150616-05.png 2x" data-v-339c7bd5></div> <p><strong>第二步，加载本地 HTML。</strong></p> <p>本文示例中，HTML 文件及其资源文件被组织在一个叫<code>html</code>的目录中，目录结构如下图，index.html 是要被加载的目标文件，index.html 中访问 css、js 以及图片资源的方式都是使用相对路径，实现代码也给展示在下图中。</p> <div class="custom-image-wrapper" data-v-339c7bd5><img src="/image/20150616-04.png" srcset="/image/20150616-04.png 2x" data-v-339c7bd5></div> <p>上图右侧代码区域加载策略是，先获取本地 HTML 文本，转为字符串，然后使用<code>loadHTMLString:baseURL:</code>方法加载；当然也可以使用<code>loadRequest:</code>方法，哪个更好？我暂时也不知道！</p> <p><strong>关于 baseURL</strong></p> <p>上文<code>loadHTMLString:baseURL:</code>方法的第二个参数是 baseURL，baseURL 是 HTML 字符串中引用到资源的查找路径，当 HTML 中没有引用外部资源时，可以指定为<code>nil</code>；若引用了外部资源，一般情况下使用 mainBundle 的路径即可。在实际操作中，常常会出现「文本显示正常，图片无法显示」等情况，若 HTML 文本中引用外部资源都是使用相对路径，则出现这种问题的原因一般都是 baseURL 参数错误（有时甚至是<code>nil</code>）。</p> <p>最后，本文的 Demo 详见<a href="https://github.com/sadjason/iOSDemos/tree/master/UIWebView%E9%9D%9E%E5%88%9D%E4%BD%93%E9%AA%8C" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.50bca889.js" defer></script><script src="/assets/js/5.081d1701.js" defer></script><script src="/assets/js/106.978e1fc0.js" defer></script><script src="/assets/js/4.a7413ce2.js" defer></script>
  </body>
</html>
