(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{126:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[n("code",[t._v("UIScrollview")]),t._v("是 iOS 世界里一个比较麻烦的控件，本文旨在梳理相关 API 的使用姿势，以便在使用的时候进行参考。")]),t._v(" "),n("h2",{attrs:{id:"uiscrollviewdelegate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#uiscrollviewdelegate"}},[t._v("#")]),t._v(" UIScrollViewDelegate")]),t._v(" "),n("p",[t._v("简单介绍一下 UIScrollViewDelegate 定义的一些方法，这里只涉及与 scroll 相关的方法，zoom 相关的方法略过不表。")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("scrollViewDidScroll(_:)")])])]),t._v(" "),n("p",[t._v("这个方法在任何方式触发"),n("code",[t._v("contentOffset")]),t._v("变化的时候都会被调用（包括用户拖动，减速过程，直接通过代码设置等），可以用于监控"),n("code",[t._v("contentOffset")]),t._v("的变化，并根据当前的"),n("code",[t._v("contentOffset")]),t._v("对其他 view 做出随动调整。")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("scrollViewWillBeginDragging(_:)")])])]),t._v(" "),n("p",[t._v("用户开始拖动 scroll view 的时候被调用。")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("scrollViewWillEndDragging(_:withVelocity:targetContentOffset:)")])])]),t._v(" "),n("p",[t._v("这个方法是 iOS 5 之后引入的，可在它的基础上实现更为丰富的自定义 paging。")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("scrollViewDidEndDragging(_:willDecelerate:)")])])]),t._v(" "),n("p",[t._v("在用户结束拖动后被调用，"),n("code",[t._v("willDecelerate")]),t._v("为 YES 时，结束拖动后会有减速过程（惯性）。")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("scrollViewWillBeginDecelerating(_:)")])])]),t._v(" "),n("p",[t._v("减速动画开始前被调用。")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("scrollViewDidEndDecelerating(_:)")])])]),t._v(" "),n("p",[t._v("减速动画结束时被调用，这里有一种特殊情况：当一次减速动画尚未结束的时候再次 drag scroll view，该方法不会被调用，并且这时 scroll view 的"),n("code",[t._v("dragging")]),t._v("和"),n("code",[t._v("decelerating")]),t._v("属性都是"),n("code",[t._v("YES")]),t._v("。新的 dragging 如果有加速度，那么"),n("code",[t._v("scrollViewWillBeginDecelerating(_:)")]),t._v("会再一次被调用，然后才是"),n("code",[t._v("scrollViewDidEndDecelerating(_:)")]),t._v("；如果没有加速度，虽然"),n("code",[t._v("scrollViewWillBeginDecelerating(_:)")]),t._v("不会被调用，但前一次留下的"),n("code",[t._v("scrollViewDidEndDecelerating(_:)")]),t._v("会被调用。")]),t._v(" "),n("blockquote",[n("p",[t._v("P.S: 以上的解释比较拗口，动手体验一下就明白了。")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("scrollViewDidEndScrollingAnimation(_:)")])])]),t._v(" "),n("p",[t._v("当通过代码滑动 scroll view 时（"),n("code",[t._v("setContentOffset(_:animated:)")]),t._v("或者"),n("code",[t._v("scrollRectVisible(_:animated:)")]),t._v("），动画结束时会调用该方法；值得一提的是，当且仅当动画存在时才会调用该方法。")]),t._v(" "),n("h2",{attrs:{id:"scrolling-with-finger"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scrolling-with-finger"}},[t._v("#")]),t._v(" Scrolling With Finger")]),t._v(" "),n("p",[t._v("我总结了一些手指控制 UIScrollView 滑动的场景，将相关的回调给列出来了。")]),t._v(" "),n("p",[n("strong",[t._v("场景一：一次正常的滑动-减速-停止")])]),t._v(" "),n("div",{staticClass:"language-swift extra-class"},[n("pre",{pre:!0,attrs:{class:"language-swift"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指介入")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始滑动")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指离开屏幕（scrolling继续，并未停滞）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("withVelocity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("targetContentOffset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("willDecelerate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拖拽结束（willDecelerate=true）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDecelerating")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减速")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDecelerating")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减速结束")]),t._v("\n")])])]),n("p",[n("strong",[t._v("场景二：减速过程中的手指介入（点停）")])]),t._v(" "),n("div",{staticClass:"language-swift extra-class"},[n("pre",{pre:!0,attrs:{class:"language-swift"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指介入")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始滑动")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指离开屏幕（scrolling继续，并未停滞）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("withVelocity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("targetContentOffset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("willDecelerate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拖拽结束（willDecelerate=true）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDecelerating")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减速")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指介入（scrolling停止 -- 之前的操作被取消）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指离开屏幕")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("withVelocity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("targetContentOffset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("willDecelerate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拖拽结束（willDecelerate=false）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDecelerating")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减速结束")]),t._v("\n")])])]),n("p",[n("strong",[t._v("场景三：减速过程中的手指介入（乱滑）")])]),t._v(" "),n("div",{staticClass:"language-swift extra-class"},[n("pre",{pre:!0,attrs:{class:"language-swift"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指介入")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始滑动")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指离开屏幕（scrolling继续，并未停滞）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("withVelocity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("targetContentOffset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("willDecelerate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拖拽结束（willDecelerate=true）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDecelerating")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减速")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指介入--重新拖拽（scrolling停止 -- 之前的操作被取消）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始滑动")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指离开屏幕（scrolling继续，并未停滞）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("withVelocity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("targetContentOffset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("willDecelerate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拖拽结束（willDecelerate=true）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDecelerating")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减速")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidScroll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scrolling...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指介入--点停（scrolling停止 -- 之前的操作被取消）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillBeginDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手指离开屏幕")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewWillEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("withVelocity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("targetContentOffset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDragging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("willDecelerate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拖拽结束（willDecelerate=false）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndDecelerating")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减速结束")]),t._v("\n")])])]),n("h2",{attrs:{id:"scrolling-programmatically"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scrolling-programmatically"}},[t._v("#")]),t._v(" Scrolling Programmatically")]),t._v(" "),n("p",[n("strong",[t._v("Scrolling to a Specific Offset")])]),t._v(" "),n("p",[t._v("可通过设置 content offset 让 scrollView 滚动到某个指定位置，有两种方式：一是直接给"),n("code",[t._v("contentOffset")]),t._v("属性赋值，二是调用"),n("code",[t._v("setContentOffset(_:animated:)")]),t._v("方法。对于第二种，当"),n("code",[t._v("animated")]),t._v("参数设置为 NO，等效于第一种方式。")]),t._v(" "),n("p",[t._v("无论是哪一种情况，"),n("code",[t._v("delegate")]),t._v("都会接收到"),n("code",[t._v("scrollViewDidScroll(_:)")]),t._v("消息。")]),t._v(" "),n("p",[t._v("只是当禁止动画时，"),n("code",[t._v("delegate")]),t._v("只会收到一次"),n("code",[t._v("scrollViewDidScroll(_:)")]),t._v("消息；当允许动画时，"),n("code",[t._v("delegate")]),t._v("会在动画过程中接收到一系列"),n("code",[t._v("scrollViewDidScroll(_:)")]),t._v("消息，并且当动画结束时，"),n("code",[t._v("delegate")]),t._v("还会接收到"),n("code",[t._v("scrollViewDidEndScrollingAnimation(_:)")]),t._v("消息。")]),t._v(" "),n("p",[n("strong",[t._v("Making a rectangle visible")])]),t._v(" "),n("p",[t._v("还可以调用"),n("code",[t._v("scrollRectToVisible(_:animated:)")]),t._v("方法让 scrollView 滚动到一个合适的位置以使指定区域可见，"),n("code",[t._v("animated")]),t._v("参数依然是用来控制动画开关的。当关闭动画时，"),n("code",[t._v("delegate")]),t._v("会接收到一次"),n("code",[t._v("scrollViewDidScroll(_:)")]),t._v("消息；当允许动画时，"),n("code",[t._v("delegate")]),t._v("会在动画过程中接收到一系列"),n("code",[t._v("scrollViewDidScroll(_:)")]),t._v("消息，并且当动画结束时，"),n("code",[t._v("delegate")]),t._v("还会接收到"),n("code",[t._v("scrollViewDidEndScrollingAnimation(_:)")]),t._v("消息。")]),t._v(" "),n("p",[n("strong",[t._v("Scroll To Top")])]),t._v(" "),n("p",[n("code",[t._v("UITableView")]),t._v("等子类还实现了 Scroll To Top 功能，这里不赘述了，详细参考"),n("a",{attrs:{href:"https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/UIScrollView_pg/ScrollingViewContent/ScrollingViewContent.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("h2",{attrs:{id:"tracking-the-start-and-completion-of-a-scroll-action"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tracking-the-start-and-completion-of-a-scroll-action"}},[t._v("#")]),t._v(" Tracking The Start and Completion Of A Scroll Action")]),t._v(" "),n("p",[t._v("Implement the scrollViewWillBeginDragging: method to receive notification that dragging will begin.")]),t._v(" "),n("p",[t._v("当编程实现滚动（设置"),n("code",[t._v("contentOffset")]),t._v("、）时，"),n("code",[t._v("scrollViewWillBeginDragging:")]),t._v("也会被调用吗？")]),t._v(" "),n("p",[t._v("To determine when scrolling is complete you must implement two delegate methods: scrollViewDidEndDragging:willDecelerate: and scrollViewDidEndDecelerating:. Scrolling is completed either when the delegate receives the scrollViewDidEndDragging:willDecelerate: message with NO as the decelerate parameter, or when your delegate receives the scrollViewDidEndDecelerating: method. In either case, scrolling is complete.")]),t._v(" "),n("p",[n("strong",[t._v("编程实现滚动时抗干扰")])]),t._v(" "),n("p",[t._v("在开始和结束时设置"),n("code",[t._v("userInteractionEnabled")]),t._v("属性即可：")]),t._v(" "),n("div",{staticClass:"language-swift extra-class"},[n("pre",{pre:!0,attrs:{class:"language-swift"}},[n("code",[t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInteractionEnabled "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nscrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContentOffset")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("CGPointZero")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" animated"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollViewDidEndScrollingAnimation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIScrollView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInteractionEnabled "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"经验之谈"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#经验之谈"}},[t._v("#")]),t._v(" 经验之谈")]),t._v(" "),n("p",[n("strong",[t._v("不可描述的问题")])]),t._v(" "),n("p",[t._v("一般来说，在 UIScrollView 静止状态下，点击（只是轻点一下）不会触发 UIScrollViewDelegate 相关的回调，但曾在开发中遇到了一件诡异的事情，点击静止状态下的 UIScrollView 会触发"),n("code",[t._v("scrollViewWillBeginDecelerating(_:)")]),t._v("和"),n("code",[t._v("scrollViewDidEndDecelerating(_:)")]),t._v("回调，代码如下：")]),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("viewDidLoad "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),t._v(" viewDidLoad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIColor whiteColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  UIScrollView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("scrollView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIScrollView alloc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" initWithFrame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("CGRectMake")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIColor lightGrayColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bounces "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contentSize "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("CGSizeMake")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("160")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pagingEnabled "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" YES"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showsHorizontalScrollIndicator "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delegate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("view addSubview"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("scrollView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  UIView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("view1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIView alloc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" initWithFrame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("CGRectMake")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  view1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIColor redColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("scrollView addSubview"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("view1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  UIView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("view2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIView alloc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" initWithFrame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("CGRectMake")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  view2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIColor greenColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("scrollView addSubview"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("view2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("排查了好久，最终发现问题出在"),n("code",[t._v("scrollView.pagingEnabled = YES")]),t._v("这里，以上的 scroll view 允许 paging，然而，其"),n("code",[t._v("contentSize.width")]),t._v("并不是"),n("code",[t._v("size.width")]),t._v("的整数倍，这会让它显式最后一页时没办法达到稳定状态，该情况下点击 UIScrollView 会触发"),n("code",[t._v("scrollViewWillBeginDecelerating(_:)")]),t._v("和"),n("code",[t._v("scrollViewDidEndDecelerating(_:)")]),t._v("。该情景不太容易描述...")]),t._v(" "),n("p",[n("strong",[t._v("UIScrollView Custom Paging")])]),t._v(" "),n("p",[t._v("通过回调"),n("code",[t._v("scrollViewWillEndDragging(_:withVelocity:targetContentOffset:)")]),t._v("可以在"),n("code",[t._v("UIScrollView#pagingEnabled")]),t._v("设为"),n("code",[t._v("false")]),t._v("的情况下自己实现 paging 效果。然而，用户体验并不好，至少不如"),n("code",[t._v("UIScrollView#pagingEnabled = true")]),t._v("顺畅，参考"),n("a",{attrs:{href:"http://stackoverflow.com/questions/6945964/uiscrollview-custom-paging",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),n("OutboundLink")],1),t._v("，不晓得有没什么办法改善操作体验。")]),t._v(" "),n("h2",{attrs:{id:"本文参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本文参考"}},[t._v("#")]),t._v(" 本文参考")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/UIScrollView_pg/ScrollingViewContent/ScrollingViewContent.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Scroll View Programming Guide for iOS"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"http://tech.glowing.com/cn/practice-in-uiscrollview/",target:"_blank",rel:"noopener noreferrer"}},[t._v("UIScrollView 实践经验"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);