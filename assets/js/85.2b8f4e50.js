(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{170:function(t,n,a){"use strict";a.r(n);var r=a(0),o=Object(r.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("router-link",{attrs:{to:"/post/modal-transitions-in-ios/"}},[t._v("Modal Transition 概述")]),t._v("对自定义 transition 进行了简单概述，"),a("a",{attrs:{href:"/post/uipercentdriveninteractivetransition"}},[t._v("Using UIPercentDrivenInteractiveTransition")]),t._v("介绍了可交互转场的基本实现思路。本文旨在总结实现"),a("strong",[t._v("自定义 navigation 转场")]),t._v("的基本套路。")],1),t._v(" "),a("p",[t._v("此外，还对自己写的相关 demo 做一个汇总。")]),t._v(" "),a("h2",{attrs:{id:"basic-methods-of-custom-navigation-transition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basic-methods-of-custom-navigation-transition"}},[t._v("#")]),t._v(" Basic Methods Of Custom Navigation Transition")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("UINavigationController")]),t._v("的基础上实现自定义 custom navigation transition，只需要让自定义 view controller 遵循"),a("code",[t._v("UINavigationControllerDelegate")]),t._v("协议，如下：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MainViewController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIViewController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UINavigationControllerDelegate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewDidLoad")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewDidLoad")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    navigationController"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delegate "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("默认情况下，"),a("code",[t._v("UINavigationController#delegate")]),t._v("为"),a("code",[t._v("nil")]),t._v("，此时 push 和 pop 动画全部采用系统默认 transition。")]),t._v(" "),a("p",[a("code",[t._v("UINavigationControllerDelegate")]),t._v("定义了 6 个方法，与 transition 直接相关的有两个：")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为push和pop操作提供animation controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigationController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("navigationController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UINavigationController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  animationControllerForOperation operation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UINavigationControllerOperation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  fromViewController fromVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIViewController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  toViewController toVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIViewController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIViewControllerAnimatedTransitioning")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为push和pop操作提供interaction controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigationController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  navigationController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UINavigationController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  interactionControllerForAnimationController animationController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIViewControllerAnimatedTransitioning")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIViewControllerInteractiveTransitioning")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n")])])]),a("p",[t._v("站在这两个方法的角度来看，"),a("code",[t._v("UINavigationControllerDelegate")]),t._v("有点类似于"),a("code",[t._v("UIViewControllerTransitioningDelegate")]),t._v("，后者为 transition 动画提供 animation controller 和 interaction controller，前者的作用也类似。")]),t._v(" "),a("h2",{attrs:{id:"some-demos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#some-demos"}},[t._v("#")]),t._v(" Some Demos")]),t._v(" "),a("p",[a("strong",[t._v("可交互的简单 push/pop 实现 -- 仿知乎")])]),t._v(" "),a("e-img",{attrs:{src:"/image/simple-custom-navigation-transition.gif",alt:"Basic Interactive Custom Navigation Transition Demo"}}),t._v(" "),a("p",[t._v("代码详见"),a("a",{attrs:{href:"https://github.com/sadjason/BasicInteractiveCustomNavigationTransitionDemo",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("如下是一些不错的开源 custom navigation transition 实现：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/recruit-mp/RMPZoomTransitionAnimator",target:"_blank",rel:"noopener noreferrer"}},[t._v("RMPZoomTransitionAnimator"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/DenHeadless/ZoomInteractiveTransition",target:"_blank",rel:"noopener noreferrer"}},[t._v("ZoomInteractiveTransition"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/NewAmsterdamLabs/ZOZolaZoomTransition",target:"_blank",rel:"noopener noreferrer"}},[t._v("ZOZolaZoomTransition"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/hebertialmeida/HAPaperViewController",target:"_blank",rel:"noopener noreferrer"}},[t._v("HAPaperViewController"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/boycechang/BCMagicTransition",target:"_blank",rel:"noopener noreferrer"}},[t._v("BCMagicTransition"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/JakeLin/IBAnimatable",target:"_blank",rel:"noopener noreferrer"}},[t._v("IBAnimatable"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"本文参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本文参考"}},[t._v("#")]),t._v(" 本文参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://stackoverflow.com/questions/26569488/navigation-controller-custom-transition-animation",target:"_blank",rel:"noopener noreferrer"}},[t._v("Navigation Controller Custom Transition Animation"),a("OutboundLink")],1)])])],1)}),[],!1,null,null,null);n.default=o.exports}}]);